<div id="dwd-fronten" class="dwd-fronten">
    <div class="indicator-info">
        <p>4 days</p>
    </div>
    <div class="indicator">
        <div class="filler"></div>
        <div class="dot"></div>
    </div>
    {% if jekyll.environment == "development" %}
    <img id="animation" src="https://via.placeholder.com/800x653?text=dwd-fronten">
    {% else %}
    <img id="animation" src="https://www.dwd.de/DWD/wetter/wv_spez/hobbymet/wetterkarten/ico_tkboden_na_024.png">
    {% endif %}
    <div class="info">
        <a
            href="https://www.dwd.de/DE/fachnutzer/hobbymet/wetter_europa/allgemeines_analyse_prognosekarten_europa_neu.html?nn=16102&lsbId=378468"><img
                src="/info.svg"></a>
        <a
            href="https://www.dwd.de/DE/fachnutzer/hobbymet/wetter_europa/allgemeines_mehrfach_prognosesekarten.html?nn=16102&lsbId=378468"><img
                src="/info.svg"></a>
    </div>
    <script>
        var img_animation = document.getElementById("animation")
        document.getElementById("dwd-fronten").getElementsByClassName("indicator-info")[0].style.display = "inherit"
        var indicator = document.getElementById("dwd-fronten").getElementsByClassName("indicator")[0]
        indicator.style.display = "flex"
        var filler = indicator.getElementsByClassName("filler")[0]

        {% if jekyll.environment == "development" %}
        var baseurl = "https://via.placeholder.com/800x653?text="
        {% else %}
        var baseurl = "https://www.dwd.de/DWD/wetter/wv_spez/hobbymet/wetterkarten/ico_tkboden_na_"
        {% endif %}

        var frameids = ["024", "V36", "036", "048", "060", "084", "108"]
        var index = frameids.length - 1
        var loaded = false

        function completed_loading() {
            loaded = true
        }

        img_animation.addEventListener('load', completed_loading)

        function nextframe() {
            if (loaded) {

                if (index == frameids.length - 1) {
                    index = 0
                } else {
                    index += 1
                }

                loaded = false
                img_animation.src = baseurl + frameids[index] + ".png"
                let percent = index / (frameids.length - 1) * 100
                filler.style.width = percent.toString() + "%"
            }
            if (img_animation.complete) {
                completed_loading();
            }
        }

        setInterval(nextframe, 1000)
    </script>
</div>